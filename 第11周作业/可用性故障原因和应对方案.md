# 1. 引起可用性故障的原因

## 1.1 硬件故障

- 内存颗粒坏掉
- 机械硬盘电机坏了
- 服务器宕机
- 服务器掉电
- 光纤和网络故障

## 1.2  软件bug

- 死循环
- 系统资源未及时释放

## 1.3 临时系统发布

- 系统发布过程中配置参数不正确
- 数据库字段没有更新

## 1.4 并发压力过大

- 并发压力导致服务器线程耗尽系统资源

## 1.5 外部网络攻击

- 黑客入侵
- DOS攻击

## 1.6 系统环境中的不可控灾难

- 挖掘机挖断光缆
- 地震
- 火灾
- 水灾

# 2. 提升系统可用性的办法

## 2.1 软件解耦

提升代码质量

- 高内聚低耦合的组件6种设计原则 
- 面向对象设计的5种原则 SOLID
- 面向对象23种设计模式
- 领域驱动设计

## 2.2 物理隔离

- 业务子系统之间隔离在不同的服务器集群
- 微服务（中台架构）子系统之间隔离在不同的服务器上
- 分布式消息队列隔离消息生产者和消费者
- 虚拟机和容器的隔离

## 2.3 异步架构

- 多线程编程
    + 在IO/网络等待过程中充分利用资源处理系统任务
- 反应式编程
- 异步通信网络编程
    + 有消息队列可以在用户请求峰值到来的时候启动缓冲作用，允许系统以自己的节奏处理用户请求
- 事件驱动异步架构

## 2.4 备份

- 集群中应用服务器之间互为备份
- 采用分布式存储解决方案
- 失效转移：将指向失效的服务器的请求转发到有服务能力的服务节点上

## 2.5 服务端幂等设计

服务器要检查：如果是多次处理同一个请求的情景，必须保证一次处理和多次处理的效果是相同的

## 2.6 分布式事务补偿

分布式数据库事务当中某一步失败，必须准备好补偿机制，保证回撤整个事物已经发生的效果和作用。

## 2.7 微服务熔断

## 2.8 微服务重试

## 2.9 微服务限流

## 2.10 微服务降级

## 2.11 异地多活架构

在多个地区部署数据中心，数据中心之间互为备份
